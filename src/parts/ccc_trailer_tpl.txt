    singleton = Singleton{
        .instance = instance,
        .ref_count = 1,
    };

    return instance;
}

pub fn deinit(self: *CccMap) void {
    if (singleton) |*s| {
        s.ref_count -= 1;
        if (s.ref_count == 0) {
            self.map.deinit();
            self.allocator.destroy(s.instance);
            singleton = null;
        }
    }
}

/// combiningClass maps the code point to its combining class value.
pub fn combiningClass(self: CccMap, cp: u21) u8 {
    return if (self.map.get(cp)) |cc| cc else 0;
}
